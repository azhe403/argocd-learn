apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

metadata:
  name: argocd-learn-core
  annotations:
    config.kubernetes.io/local-config: "true"

# Common labels applied to all core resources
commonLabels:
  app.kubernetes.io/part-of: argocd-learn
  app.kubernetes.io/managed-by: kustomize

namespace: argocd-learn

# Include all core infrastructure resources
resources:
- clusterissuer/selfsigned-issuer.yaml
- clusterissuer/ca-certificate.yaml
- clusterissuer/ca-issuer.yaml
- argocd/ingress.yaml
- sealed-secrets
- argocd-image-updater

# Generate ConfigMap for core configuration
configMapGenerator:
- name: argocd-learn-core-config
  behavior: create
  literals:
    - CLUSTER_NAME=argocd-learn
    - NAMESPACE=argocd-learn
